(()=>{const e=g.q;g.skin.PhotoLoad={render:function(o={}){const n=o.photo,t=n?e.attr("style",`background-image: url('${n}')`):"",i=e.onClick("skin.PhotoLoad._onRemoveClick","event","this");return e.html`
    <div class="PhotoLoad" ${t} data-id="${o.id}">
      <div class="PhotoLoad__remove" ${i}>âœ•</div>
      ${100===o.percent?"":e.html`
        <div class="PhotoLoad__progress">
          <div class="PhotoLoad__progressLine"></div>
        </div>
      `}
    </div>
  `}}})(),(()=>{const e=g.skin.PhotoLoad||(g.skin.PhotoLoad={});function o(e,o){o.closest(".PhotoLoad").classList.toggle("PhotoLoad_removed")}Object.assign(e,{setPhoto:function(e,o){e.style.backgroundImage=`url('${o}')`},setProgress:function(e,o){const t=e.$(n.progressLine);100===o?t.parentElement.remove():t.style.width=`${o}%`}}),e._onRemoveClick=o;var n={progressLine:".PhotoLoad__progressLine"}})(),(()=>{g.$$,g.Resumable})(),(()=>{const e=g.$$,o=g.Resumable;function n(){return location.href.includes("models")}function t(){return location.href.includes("articles")}function i(){if(n())return{name:$("input[name=name]").value,gender:Number($("select[name=gender]").value),instagram:$("input[name=instagram]").value,cover:a("cover")[0]||null,book:a("book"),polaroids:a("polaroids"),params:{height:Number($("input[name=height]").value),chest:Number($("input[name=chest]").value),waist:Number($("input[name=waist]").value),hips:Number($("input[name=hips]").value),shoe:Number($("input[name=shoe]").value),hair:$("input[name=hair]").value,eyes:$("input[name=eyes]").value}};if(t()){const o=[];return Array.from(e(".AdminForm__model")).forEach(e=>{"0"!==e.value&&o.push(e.value)}),{title:$("input[name=title]").value,models:o,photos:a("photos"),date:{day:Number($("input[name=day]").value),month:Number($("input[name=month]").value),year:Number($("input[name=year]").value)}}}}function a(o){const n=e(`.AdminForm__section_${o} .PhotoLoad:not(.PhotoLoad_removed)`);return Array.from(n).map(e=>e.dataset.id)}!function(){const n=new o({target:"/upload"});n.assignBrowse(e(".AdminForm__section_upload .AdminForm__title")),n.assignDrop(e(".AdminForm__section_upload")),n.on("fileAdded",(e,o)=>{console.log("file added"),n.upload();const t=o.target.closest(".AdminForm__section_upload");t.classList.contains("AdminForm__section_cover")?t.$(".AdminForm__content").innerHTML=g.skin.PhotoLoad.render({id:e.uniqueIdentifier}):t.$(".AdminForm__content").insertAdjacentHTML("beforeend",g.skin.PhotoLoad.render({id:e.uniqueIdentifier}))}),n.on("fileProgress",(e,o)=>{console.log("file progress"),console.log(e);const n=$(`.PhotoLoad[data-id="${e.uniqueIdentifier}"]`);console.log(n),n&&g.skin.PhotoLoad.setProgress(n,100*e.progress())}),n.on("fileSuccess",(e,o)=>{console.log("file success");const n=$(`.PhotoLoad[data-id="${e.uniqueIdentifier}"]`);n&&(o=JSON.parse(o),g.skin.PhotoLoad.setPhoto(n,o.photo),n.setAttribute("data-id",o.id))}),n.on("fileError",(e,o)=>{console.log("file error"),console.log("ERROR!!!")}),n.on("fileRetry",e=>{console.log("file retry")})}(),window.skin.AdminForm={_onSaveClick:async function(e){const o=i(),a=new FormData;a.append("json",JSON.stringify(o));await fetch(location.pathname,{method:"POST",body:a});n()&&(location.href="/admin/models");t()&&(location.href="/admin/articles")},_onDeleteClick:function(e){confirm("Are you sure?")||e.preventDefault()}},window.serialize=i,window.onAddModelChange=function(e){e.parentElement.insertAdjacentHTML("afterend",e.parentElement.outerHTML),e.setAttribute("onchange","")},window.removeSelect=function(e){e.parentElement.remove()}})();